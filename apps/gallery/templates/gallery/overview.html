{% extends "base.html" %}
{% load static %}

{% block title %}{{ page_settings.meta_title|default:"Hotel Gallery - Weddings, Dining, Family Fun & Events in Machakos" }}{% endblock %}
{% block meta_description %}{{ page_settings.meta_description|default:"Explore our beautiful gardens, wedding setups, farm-to-fork dining, kids play areas, and corporate event spaces in Machakos. See why families and event planners choose us." }}{% endblock %}
{% block meta_keywords %}{{ page_settings.meta_keywords|default:"Kids play area in Machakos, Family-friendly hotel in Machakos, Kids activities Machakos, Bouncing castle Machakos, Family fun zone Machakos" }}{% endblock %}
{% block og_title %}Hotel Gallery | Zamar Springs Gardens{% endblock %}
{% block og_description %}Visual highlights of weddings, dining, family fun, gardens, and conferences at Zamar Springs Gardens.{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/gallery.css' %}">
{% endblock %}

{% block extra_head %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ImageGallery",
  "name": "Zamar Springs Gardens Gallery",
  "description": "Weddings, dining, kids and family, gardens, and conference image gallery in Machakos.",
  "url": "{{ request.build_absolute_uri }}"
}
</script>
{% endblock %}

{% block content %}
<section class="gallery-hero">
    <div class="container">
        <div class="gallery-hero-content">
            <h1>{{ page_settings.hero_title|default:"Hotel Gallery" }}</h1>
            <p>{{ page_settings.hero_subtitle|default:"A visual story of experiences at Zamar Springs Gardens." }}</p>
        </div>
    </div>
</section>

<section class="section-padding">
    <div class="container">
        <section class="gallery-group" id="gallery-menu">
            <div class="gallery-group-head">
                <h2>Menu Gallery</h2>
                <p>Visual highlights of our dining menu and platter presentation.</p>
            </div>

            {% if menu_gallery_images %}
            <div class="gallery-grid">
                {% for image in menu_gallery_images %}
                <figure class="gallery-card">
                    <button
                        class="gallery-lightbox-trigger"
                        type="button"
                        data-src="{{ image.image_path }}"
                        data-alt="{{ image.alt_text }}"
                        data-caption="{{ image.caption|default:image.title }}"
                        aria-label="Open menu image: {{ image.alt_text }}"
                    >
                        <img src="{{ image.image_path }}" alt="{{ image.alt_text }}" loading="lazy" decoding="async" width="640" height="480">
                    </button>
                    <figcaption>{{ image.caption|default:image.title }}</figcaption>
                </figure>
                {% endfor %}
            </div>
            {% else %}
            <div class="gallery-empty">Menu gallery items are being prepared.</div>
            {% endif %}
        </section>

        <section class="gallery-group" id="gallery-social">
            <div class="gallery-group-head">
                <h2>Social Media Highlights</h2>
                <p>Latest updates from Instagram and TikTok. Posts refresh automatically.</p>
            </div>

            <div class="social-platform-grid">
                <article class="social-platform-card">
                    <h3><i class="fab fa-instagram"></i> Instagram</h3>
                    {% if social_posts.instagram %}
                    <div class="social-post-grid">
                        {% for post in social_posts.instagram %}
                        <a class="social-post" href="{{ post.permalink }}" target="_blank" rel="noopener" aria-label="Open Instagram post {{ forloop.counter }}">
                            {% if post.media_url %}
                            <img src="{{ post.media_url }}" alt="Instagram post {{ forloop.counter }} preview" loading="lazy" decoding="async" width="160" height="160">
                            {% else %}
                            <div class="social-post-fallback"><i class="fab fa-instagram"></i></div>
                            {% endif %}
                            <p>{{ post.caption|default:"View latest Instagram post"|truncatechars:90 }}</p>
                        </a>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="gallery-empty">Instagram feed will appear here after API setup.</div>
                    {% endif %}
                </article>

                <article class="social-platform-card">
                    <h3><i class="fab fa-tiktok"></i> TikTok</h3>
                    {% if social_posts.tiktok %}
                    <div class="social-post-grid">
                        {% for post in social_posts.tiktok %}
                        <a class="social-post" href="{{ post.permalink }}" target="_blank" rel="noopener" aria-label="Open TikTok post {{ forloop.counter }}">
                            {% if post.media_url %}
                            <img src="{{ post.media_url }}" alt="TikTok post {{ forloop.counter }} preview" loading="lazy" decoding="async" width="160" height="160">
                            {% else %}
                            <div class="social-post-fallback"><i class="fab fa-tiktok"></i></div>
                            {% endif %}
                            <p>{{ post.caption|default:"View latest TikTok post"|truncatechars:90 }}</p>
                        </a>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="gallery-empty">TikTok feed will appear here after API setup.</div>
                    {% endif %}
                </article>
            </div>
        </section>

        {% for section in grouped_sections %}
        <section class="gallery-group" id="gallery-{{ section.key }}">
            <div class="gallery-group-head">
                <h2>{{ section.title }}</h2>
                <p>{{ section.description }}</p>
            </div>

            {% if section.images %}
            <div class="gallery-grid">
                {% for image in section.images %}
                <figure class="gallery-card">
                    <button
                        class="gallery-lightbox-trigger"
                        type="button"
                        data-src="{{ image.image_path }}"
                        data-alt="{{ image.alt_text }}"
                        data-caption="{{ image.caption|default:image.title }}"
                        aria-label="Open image: {{ image.alt_text }}"
                    >
                        <img src="{{ image.image_path }}" alt="{{ image.alt_text }}" loading="lazy" width="640" height="480">
                    </button>
                    <figcaption>{{ image.caption|default:image.title }}</figcaption>
                </figure>
                {% endfor %}
            </div>
            {% else %}
            <div class="gallery-empty">Gallery items for this section are being updated.</div>
            {% endif %}
        </section>
        {% endfor %}
    </div>
</section>

<div class="gallery-lightbox" id="gallery-lightbox" aria-hidden="true">
    <button class="gallery-lightbox-close" type="button" aria-label="Close image viewer">&times;</button>
    <div class="gallery-lightbox-content">
        <img id="gallery-lightbox-image" src="" alt="">
        <p id="gallery-lightbox-caption"></p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/gallery.js' %}" defer></script>
{% endblock %}

